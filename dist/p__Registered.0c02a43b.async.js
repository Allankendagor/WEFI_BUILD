"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[260],{64752:function(K,i,e){e.d(i,{S:function(){return n}});var g=e(15009),D=e.n(g),h=e(99289),A=e.n(h),p=e(5574),o=e.n(p),I=e(67294),j=e(85893),n=(0,I.createContext)({token:null,setToken:function(){}}),L=function(v){var T=v.children,r=useState(localStorage.getItem("awesomeleadstoken")),m=_slicedToArray(r,2),s=m[0],l=m[1];return useEffect(function(){var P=function(){var M=_asyncToGenerator(_regeneratorRuntime().mark(function E(){var d,_,c;return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!s){a.next=25;break}return a.prev=1,d={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}},a.next=5,fetch("http://52.206.183.121:8000/login",d);case 5:if(_=a.sent,_.ok){a.next=13;break}console.log("Token:",s),console.error("Error fetching user data:",_.status),l(null),localStorage.removeItem("awesomeleadstoken"),a.next=18;break;case 13:return console.log("Token:",s),a.next=16,_.json();case 16:c=a.sent,console.log("User data:",c);case 18:a.next=25;break;case 20:a.prev=20,a.t0=a.catch(1),console.error("Error fetching user data:",a.t0),l(null),localStorage.removeItem("awesomeleadstoken");case 25:case"end":return a.stop()}},E,null,[[1,20]])}));return function(){return M.apply(this,arguments)}}();P()},[s]),useEffect(function(){s?localStorage.setItem("awesomeleadstoken",s):localStorage.removeItem("awesomeleadstoken")},[s]),_jsx(n.Provider,{value:{token:s,setToken:l},children:T})}},32758:function(K,i,e){e.r(i);var g=e(15009),D=e.n(g),h=e(99289),A=e.n(h),p=e(5574),o=e.n(p),I=e(4393),j=e(40056),n=e(67294),L=e(90930),f=e(35312),v=e(64752),T=e(75716),r=e(85893),m=function(){var l=(0,f.useIntl)(),P=(0,n.useContext)(v.S),M=P.token,E=(0,n.useState)([]),d=o()(E,2),_=d[0],c=d[1],y=(0,n.useState)(""),a=o()(y,2),C=a[0],b=a[1],W=(0,n.useState)(!1),N=o()(W,2),G=N[0],z=N[1],x=(0,n.useState)(1),U=o()(x,2),w=U[0],Z=U[1],$=(0,n.useState)(10),R=o()($,2),Y=R[0],H=R[1],J=function(){var F=A()(D()().mark(function u(){var S,k,O,B;return D()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(S=localStorage.getItem("awesomeleadstoken"),S){t.next=4;break}return b("No token found in local storage."),t.abrupt("return");case 4:return k={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(S)}},t.prev=5,t.next=8,fetch("http://52.206.183.121:8000/fieldofficer/view/farmers",k);case 8:if(O=t.sent,O.ok){t.next=11;break}throw new Error("Something went wrong! You do not have Administrator priviledges");case 11:return t.next=13,O.json();case 13:B=t.sent,c(B),z(!0),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(5),t.t0 instanceof Error?b(t.t0.message):b("An unknown error occurred.");case 21:case"end":return t.stop()}},u,null,[[5,18]])}));return function(){return F.apply(this,arguments)}}();(0,n.useEffect)(function(){J()},[M]);var Q=function(u){Z(u.current),H(u.pageSize)};return(0,r.jsxs)(L._z,{content:l.formatMessage({id:"pages.admin.subPage.title",defaultMessage:"This page can only be viewed by Kendas"}),children:[(0,r.jsxs)(I.Z,{children:[(0,r.jsx)(j.Z,{message:l.formatMessage({id:"pages.welcome.alertMessage",defaultMessage:"Faster and stronger heavy-duty components have been released."}),type:"success",showIcon:!0,banner:!0,style:{margin:-12,marginBottom:48}}),C&&(0,r.jsx)("p",{style:{color:"red"},children:C}),G&&_?(0,r.jsx)(T.Z,{dataSource:_,columns:[{title:"National ID",dataIndex:"national_id",key:"national_id"},{title:"Name",dataIndex:"name",key:"name"},{title:"Phone Number",dataIndex:"phone_number",key:"phone_number"},{title:"County",dataIndex:"county",key:"county"},{title:"constituency",dataIndex:"constituency",key:"constituency"},{title:"Ward",dataIndex:"ward",key:"ward"},{title:"Gender",dataIndex:"Gender",key:"Gender"},{title:"Nearest School",dataIndex:"nearest_school",key:"nearest_school"}],rowKey:"id",pagination:{current:w,pageSize:Y,onChange:Q,total:_.length,showSizeChanger:!0,pageSizeOptions:["10","20","50"]}}):(0,r.jsx)("p",{children:"Loading..."})]}),(0,r.jsxs)("p",{style:{textAlign:"center",marginTop:24},children:["This is me adding a page? Please refer to"," ",(0,r.jsx)("a",{href:"https://pro.ant.design/docs/block-cn",target:"_blank",rel:"noopener noreferrer",children:"use block"}),"\u3002"]})]})};i.default=m}}]);
